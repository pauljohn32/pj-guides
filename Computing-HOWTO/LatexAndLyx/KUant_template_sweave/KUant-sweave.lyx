#LyX 2.0 created this file. For more info see http://www.lyx.org/
\lyxformat 413
\begin_document
\begin_header
\textclass sweavel-article
\begin_preamble
\usepackage{multicol}

\usepackage{graphicx}
\usepackage{color}
\usepackage{listings}
\lstset{tabsize=2, breaklines=true, 
  breakatwhitespace=true,
  language=R,
  captionpos=b,
  frame=single,
  framerule=0.2pt,
  framesep=1pt,
  numbers=left,
  numberstyle=\tiny,
  numbersep=5pt,
  showstringspaces=false,
  basicstyle=\footnotesize,
 % identifierstyle=\color{magenta},
  keywordstyle=\bfseries,
  commentstyle=\color{darkgreen},
 % stringstyle=\color{red},
  backgroundcolor=\color[gray]{0.935}
}

\usepackage{graphicx}
\usepackage{listings}
\lstset{tabsize=2, breaklines=true,style=Rstyle}

\fvset{listparameters={\setlength{\topsep}{0em}}}
\def\Sweavesize{\footnotesize} 
\def\Rcolor{\color{black}} 
\def\Rbackground{\color[gray]{0.95}}
\end_preamble
\use_default_options true
\begin_modules
sweave
logicalmkup
\end_modules
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding auto
\fontencoding global
\font_roman lmodern
\font_sans lmss
\font_typewriter lmtt
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100
\font_tt_scale 100

\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize 10
\spacing single
\use_hyperref false
\papersize letterpaper
\use_geometry true
\use_amsmath 1
\use_esint 1
\use_mhchem 1
\use_mathdots 1
\cite_engine natbib_authoryear
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date true
\use_refstyle 0
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 1in
\topmargin 1in
\rightmargin 1in
\bottommargin 1in
\secnumdepth 3
\tocdepth 3
\paragraph_separation skip
\defskip medskip
\quotes_language english
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
title{}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\noindent
\begin_inset Tabular
<lyxtabular version="3" rows="1" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="1.6in">
<column alignment="center" valignment="top" width="3in">
<column alignment="center" valignment="top" width="1.2in">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Box Frameless
position "c"
hor_pos "c"
has_inner_box 1
inner_pos "c"
use_parbox 0
use_makebox 0
width "1.5in"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
vspace{0pt}
\end_layout

\end_inset


\shape smallcaps
\size giant

\begin_inset Graphics
	filename jayhawk.pdf
	lyxscale 40
	width 1in

\end_inset


\end_layout

\begin_layout Plain Layout
\noindent
\align center
http://quant.ku.edu
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Box Frameless
position "c"
hor_pos "c"
has_inner_box 1
inner_pos "c"
use_parbox 0
use_makebox 0
width "2.5in"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
vspace{0pt}
\end_layout

\end_inset


\shape smallcaps
\size giant

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "100col%"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout
\noindent
\align center

\shape smallcaps
\size giant
KU
\size huge
ant Guides
\end_layout

\begin_layout Plain Layout
\noindent
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100line%"
height "1pt"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\size large
A Template for KUant Guides written with Sweave
\end_layout

\begin_layout Plain Layout
\begin_inset VSpace bigskip
\end_inset


\end_layout

\begin_layout Plain Layout

\size large
Johnson, Paul E.
\begin_inset Newline newline
\end_inset

 
\size default
<pauljohn@ku.edu>
\end_layout

\begin_layout Plain Layout
\begin_inset VSpace bigskip
\end_inset


\end_layout

\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Box Boxed
position "b"
hor_pos "c"
has_inner_box 1
inner_pos "c"
use_parbox 0
use_makebox 0
width "1in"
special "none"
height "1in"
height_special "totalheight"
status open

\begin_layout Plain Layout
\noindent
\align center
\begin_inset ERT
status collapsed

\begin_layout Plain Layout


\backslash
vspace{0pt}
\end_layout

\end_inset

Guide No.
\end_layout

\begin_layout Plain Layout
\noindent
\align center
XXXX
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Standard
This is abstract of the template LaTeX document for the preparation of KUant
 Guides (http://quant.ku.edu).
 The abstract should include a general explanation of the guide's topic.
 
\end_layout

\begin_layout Standard
This template uses Sweave.
 Please read the template guide for ordinary LaTeX before you try this one
 that uses Sweave.
 The two things build on each other.
\end_layout

\begin_layout Standard
If you are looking at the source code for this document, you will see a
 set of Sweave defaults.
 These things are subject to change, as we revise the style to match the
 KUant Guide requirements.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout

<<echo=F>>=
\end_layout

\begin_layout Plain Layout

dir.create("plots", showWarnings=F)
\end_layout

\begin_layout Plain Layout

@
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout

% In document Latex options:
\end_layout

\begin_layout Plain Layout


\backslash
fvset{listparameters={
\backslash
setlength{
\backslash
topsep}{0em}}}
\end_layout

\begin_layout Plain Layout


\backslash
SweaveOpts{prefix.string=plots/t,split=T,ae=F,nogin=T, height=3,width=3}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout

<<Roptions, echo=F>>=
\end_layout

\begin_layout Plain Layout

options(device = pdf)
\end_layout

\begin_layout Plain Layout

options(width=160, prompt=" ", continue="  ")
\end_layout

\begin_layout Plain Layout

options(useFancyQuotes = FALSE) 
\end_layout

\begin_layout Plain Layout

set.seed(75645)
\end_layout

\begin_layout Plain Layout

op <- par() 
\end_layout

\begin_layout Plain Layout

pjmar <- c(5.1, 5.1, 1.5, 2.1) 
\end_layout

\begin_layout Plain Layout

#pjmar <- par("mar")
\end_layout

\begin_layout Plain Layout

options(SweaveHooks=list(fig=function() par(mar=pjmar, ps=10)))
\end_layout

\begin_layout Plain Layout

pdf.options(onefile=F,family="Times",pointsize=10)
\end_layout

\begin_layout Plain Layout

@
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{multicols}{2}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
A KUant Guide is a brief (less than 10 pages) illustration of software usage
 for a particular task.
 
\end_layout

\begin_layout Standard
If you want to prepare a KUant Guide using Sweave in LyX, you should edit
 the file KUant-sweave.lyx.
 If you want to do the same, but using the 
\begin_inset Quotes eld
\end_inset

raw
\begin_inset Quotes erd
\end_inset

 LaTeX markup, then the file to start with is KUant-sweave.Rnw.
 Supposing you know what to do with an R Sweave document, that will be easy
 for you to manage.
\end_layout

\begin_layout Standard
How will I finesse the two colum style? I'll use small print for the output
 and make small figures.
 
\end_layout

\begin_layout Standard
Do you worry that this will look bad? I sure do.
 But it appears it may be OK! I've set the default figure size at 3 inches
 square.
 That part appears OK.
\end_layout

\begin_layout Standard
To present the code chunks, I am using the LaTeX Listings package.
 We need to talk about that.
 Even if I make the text small, I get 
\begin_inset Quotes eld
\end_inset

line wrap.
\begin_inset Quotes erd
\end_inset

 
\end_layout

\begin_layout Standard
Without further ado, here's some R that is Sweaved.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout

<<>>=
\end_layout

\begin_layout Plain Layout

x <- rnorm(1000)
\end_layout

\begin_layout Plain Layout

y <- rnorm(1000)
\end_layout

\begin_layout Plain Layout

m1 <- lm (y ~ x)
\end_layout

\begin_layout Plain Layout

summary(m1)
\end_layout

\begin_layout Plain Layout

@
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout

<<fig=T>>=
\end_layout

\begin_layout Plain Layout

plot(y ~ x, xlab="A Great Predictor", ylab="Medicore DV",col="gray90")
\end_layout

\begin_layout Plain Layout

abline(m1)
\end_layout

\begin_layout Plain Layout

@
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout

<<fig=T, width=3, height=3>>=
\end_layout

\begin_layout Plain Layout

plot(m1, which=1)
\end_layout

\begin_layout Plain Layout

@
\end_layout

\end_inset


\end_layout

\begin_layout Standard
It is tempted to make the margins of the graphs smaller and smaller, so
 that the label on the y axis touches the left edge of the column.
 But some graphs 
\begin_inset Quotes eld
\end_inset

clip
\begin_inset Quotes erd
\end_inset

 content if we do that.
 
\end_layout

\begin_layout Standard
Oh, one more thing.
 This uses Frank Harrell's Sweavel style, which works nicely in my opinion.
 That's how I learned about beautifying output listings.
\end_layout

\begin_layout Section*
Conclusion
\end_layout

\begin_layout Standard
I wanted to insert some bibliographic citations, so that future users might
 have a fully working example.
 So, without further ado 
\begin_inset CommandInset citation
LatexCommand citet
key "aitkin_general_1999"

\end_inset

, and 
\begin_inset CommandInset citation
LatexCommand citet
after "p. 57"
key "albert_bayesian_2007"

\end_inset

, as well as others (
\begin_inset CommandInset citation
LatexCommand citealp
key "jackman_bayesian_2009,mccullagh_sampling_2008,mccullagh_generalized_1983"

\end_inset

).
\end_layout

\begin_layout Standard
The other problem I need to work on is the usage of Sweave for R document
 preparation.
 I'm not sure how well that will integrate into this format.
\end_layout

\begin_layout Standard
\begin_inset CommandInset bibtex
LatexCommand bibtex
bibfiles "Stats"
options "apalike2"

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
end{multicols}
\end_layout

\end_inset


\end_layout

\end_body
\end_document
