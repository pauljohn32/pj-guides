## ----setup, include=FALSE------------------------------------------------
##This Invisible Chunk is required in all CRMDA documents
outdir <- paste0("figures-", "template")
if (!file.exists(outdir)) dir.create(outdir, recursive = TRUE)
knitr::opts_chunk$set(echo=TRUE, comment=NA, fig.path=paste0(outdir, "/p-"))
options(width = 70)

## ------------------------------------------------------------------------
N <- 100
x1 <- rnorm(N, m = 0, sd = 10)
x2 <- rpois(N, lambda = 7)
x3 <- sample(letters[1:26], N, replace = TRUE)
x4 <- gl(5, N/5, labels = c("low", "luke", "med", "warm", "hot"))
class(x1)
class(x2)
class(x3)
class(x4)

## ------------------------------------------------------------------------
dat <- data.frame(x1, x2, x3, x4, stringsAsFactors = FALSE)

## ------------------------------------------------------------------------
head(dat)

## ------------------------------------------------------------------------
str(dat)

## ------------------------------------------------------------------------
dat[c(1, 10:14, 99), ]

## ------------------------------------------------------------------------
dat[ , 3]

## ------------------------------------------------------------------------
dat[ , "x3"]

## ------------------------------------------------------------------------
dat$x3

## ------------------------------------------------------------------------
x3.1 <- dat["x3"]
class(x3.1)

## ------------------------------------------------------------------------
x3.1$x3

## ------------------------------------------------------------------------
x3.2 <- dat[["x3"]]
class(x3.2)
is.factor(x3.2)

## ------------------------------------------------------------------------
summary(dat)

## ------------------------------------------------------------------------
library(rockchalk)
summarize(dat)

## ------------------------------------------------------------------------
dimnames(dat) <- list(paste0("r", 1:100), paste0('a', 1:4))
head(dat)

## ------------------------------------------------------------------------
colnames(dat)
colnames(dat) <- c("x1", "x2", "x3", "x4")
head(dat)

## ------------------------------------------------------------------------
N <- 100
x1 <- rnorm(N, m = 0, sd = 10)
x2 <- rpois(N, lambda = 7)
dat2 <- data.frame(x1, x2)

## ------------------------------------------------------------------------
m1 <- lm(x1 ~ x2, data = dat2)

## ------------------------------------------------------------------------
dat2$pred <- predict(m1)

## ------------------------------------------------------------------------
head(dat2)

## ------------------------------------------------------------------------
dat2$otherpred <- predict(m1, interval = "confidence")

## ------------------------------------------------------------------------
head(dat2)

## ------------------------------------------------------------------------
summary(dat2)

## ------------------------------------------------------------------------
otherpred <- predict(m1, interval = "confidence")
dat3 <- cbind(dat2, otherpred)
head(dat3)

## ------------------------------------------------------------------------
dat4 <- merge(dat2, otherpred, by = "row.names")
head(dat4)

## ------------------------------------------------------------------------
dat4[ , "Row.names"] <- NULL
all.equal(dat3, dat4)

## ------------------------------------------------------------------------
sum(dat3$fit - otherpred[ , "fit"])
sum(dat3$lwr -  otherpred[ , "lwr"])

## ------------------------------------------------------------------------
sum(abs(dat4$fit - otherpred[ , "fit"]))
sum(abs(dat4$lwr -otherpred[ , "lwr"]))

## ----plot=TRUE-----------------------------------------------------------
plot(dat4$fit, otherpred[ , "fit"])

## ------------------------------------------------------------------------
dat4 <- merge(dat2, otherpred, by = "row.names")
head(dat4)

## ------------------------------------------------------------------------
dat4 <- dat4[order(as.numeric(dat4[ , "Row.names"])), ]

## ----plot=TRUE-----------------------------------------------------------
plot(dat4$fit, otherpred[ , "fit"])

## ------------------------------------------------------------------------
dat4 <- merge(dat2, otherpred, by = "row.names", sort = FALSE)

## ----plot=TRUE-----------------------------------------------------------
plot(dat4$fit, otherpred[ , "fit"])

## ----sessionInfo, echo = FALSE-------------------------------------------
sessionInfo()

